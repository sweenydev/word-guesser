/* eslint-disable no-console */
/* eslint-disable no-unreachable */
const fs = require('fs');

const { getVideo, getPlaylist, search } = require('../')
	.setDefaultOptions({
		location: 'US',
		language: 'en-us',
		quantity: 120,
	});

(async () => {
	const data = {};

	console.log('Getting playlist');
	data.playlist = await getPlaylist(
		'https://www.youtube.com/watch?v=H2wCwdHk-ao&list=PLDS0dpumEOi0pu_0pCGqvcaRkxg-o1gqg'
	).catch(err => { throw err; });

	console.log('Getting video info');
	data.video = await getVideo(
		'https://www.youtube.com/watch?v=pUxtpgREKjY'
	).catch(err => { throw err; });
	console.log('Searching...');
	data.search = await search('Node.js', { quantity: 50 })
		.catch(err => { throw err; });

	console.log('Works well :D');


	fs.writeFileSync(
		fs.existsSync('./test') ? './test/results.json' : './results.json',
		JSON.stringify(data, null, '\t')
	);
})();


/*
var youtube = require("@fabricio-191/youtube")
console.log(require("./node_modules/@fabricio-191/youtube/package.json"))

const IDs = [
	'bBAZ3JpaosE',
	'y71gCI2wKLY',
	'vebkiUSh4Yw',
	'Xzgmud9nifA',
	'tcx2-Sl61fU'
];

(async () => {
	for(const id of IDs){
		const info = await youtube.getVideo(id);
		delete info.description;
		delete info.thumbnails;
		delete info.keywords;
		delete info.availableCountries;
		if(!info.related.find(x => !x)){
			delete info.related;
		}
		console.log(info.name);
	}
})();

*/